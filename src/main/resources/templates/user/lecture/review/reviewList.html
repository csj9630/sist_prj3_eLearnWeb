<!DOCTYPE html>
<html xmlns:th = "http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<th:block th:replace = "~{//fragments/cdn :: cdn}"/>
<style type = "text/css">
#wrap {margin: 0px auto; width: 1000px; height: 1200px;}
#header {height: 150px;}
#container {min-height: 950px;}
#footer {height: 100px;}

#sectorHead {display: flex; margin-bottom: 20px;}
#headName {font-size: 20px; font-weight: bold;}
#headCount {font-size: 16px; font-weight: bold; text-align: right; margin-left: auto;}
#headCountGray {color: #a0a0a0; font-weight: bold;}
#btnWriteContainer {padding: 20px; background-color: #fff9db; border-radius: 10px; display: flex;}
#star {color: #fab005; font-weight: bold; font-size: 18px;}
#containerTitle {font-weight: bold; font-size: 18px;}
#containerContent {margin-left: 23px; font-size: 17px;}
#containerButton {margin-left: auto;}
#btnWrite {background-color: #ff8014; color: #fff; font-weight: bold; border-width: 0; border-radius: 10px; font-size: 18px; padding: 10px; padding-left: 30px; padding-right: 30px; cursor: pointer; transition: background-color 0.1s ease-in-out;}
#btnWrite:hover {background-color: #e67312;}
#reviewStats {text-align: center; margin-top: 20px; margin-bottom: 20px; border: solid; border-color: #e0e0e0;  border-radius: 10px; border-width: thin;}
#statAvgScore {font-size: 50px; height: 60px;}
#statReviewCount {font-size: 20px; margin-bottom: 10px; color: #a0a0a0;}
#partingLine {height: 1px; background-color: #e0e0e0;}
#reviewScoreSet {display: flex;}
#reviewScore {font-size: 18px; font-weight: bold; padding-top: 3px; margin-left: 5px;}
#reviewHeader {display: flex; margin-top: 15px;}
#reviewUserNameAndDate {font-weight: bold; align-content: center;}
#reviewUserName {color: #000;}
#reviewDate {color: #808080;}

td p {margin: 0 !important;}
h5 {font-weight: bold;}

/* ë³„ì  ë””ìì¸ */
.statStarRate {position: relative; display: inline-block; font-size: 40px; text-align: top; color: #ddd;}
.statStarRate .fill {position: absolute; top: 0; left: 0; white-space: nowrap; overflow: hidden; color: #fab005;}
.reviewStarRate {position: relative; display: inline-block; font-size: 20px; text-align: top; color: #ddd;}
.reviewStarRate .fill {position: absolute; top: 0; left: 0; white-space: nowrap; overflow: hidden; color: #fab005;}

/* ìˆ˜ì •, ì‚­ì œ ë²„íŠ¼ */
.reviewPopUpMenu {
	position: relative;
	display: inline-block;
	margin-left: auto;
}
.reviewPopUpMenuBtn {
	background: none;
	border: none;
	font-size: 30px;
	cursor: pointer;
	padding: 5px 10px;
	color: #404040;
}
.popupMenu {
	display: none;
	position: absolute;
	top: 100%;
	right: 0;
	background-color: #00c471;
	border-radius: 8px;
	padding: 5px 0;
	z-index: 100;
	min-width: 80px;
	flex-direction: column;
}
.popupMenuBtn {
	width: 100%;
	background: none;
	border: none;
	color: white;
	padding: 10px 15px;
	text-align: center;
	font-size: 16px;
	font-weight: bold;
	cursor: pointer;
	transition: background-color 0.1s;
}
.popupMenuBtn:hover {
	background-color: #00a760;
}
.popupMenuBtn:first-child {
	border-bottom: 1px solid rgba(255, 255, 255, 0.2);
}
.reviewPopUpMenu:hover .popupMenu {
	display: flex; /* ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ë©´ ìˆ¨ê²¨ë‘” ë©”ë‰´ë¥¼ flex ë°•ìŠ¤ë¡œ ë³´ì—¬ì¤ë‹ˆë‹¤. */
}

/* ëª¨ë‹¬ */
* { box-sizing: border-box; font-family: sans-serif; }

/* ëª¨ë‹¬ ë°°ê²½ (í™”ë©´ ì „ì²´ë¥¼ ë®ëŠ” ì–´ë‘ìš´ ë§‰) */
.modal-overlay {
    display: none; /* í‰ì†Œì—ëŠ” ìˆ¨ê¹€ (JSë¡œ flexë¡œ ë³€ê²½) */
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(0, 0, 0, 0.5); /* ë°˜íˆ¬ëª… ê²€ì • */
    justify-content: center; /* ê°€ë¡œ ì¤‘ì•™ ì •ë ¬ */
    align-items: center; /* ì„¸ë¡œ ì¤‘ì•™ ì •ë ¬ */
    z-index: 1000;
}

/* ëª¨ë‹¬ ë³¸ë¬¸ (í•˜ì–€ìƒ‰ ë°•ìŠ¤) */
.modal-content {
    background-color: white;
    padding: 30px;
    border-radius: 12px;
    width: 400px;
    text-align: center;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
}

.modal-content h2 {
    font-size: 18px;
    margin-bottom: 20px;
    color: #333;
}

/* ë³„ì  ìŠ¤íƒ€ì¼ */
.star-rating-input {
    margin-bottom: 20px;
}
.star-rating-input .star {
    font-size: 40px;
    color: #e4e5e9; /* ë¹ˆ ë³„ ìƒ‰ìƒ (íšŒìƒ‰) */
    cursor: pointer;
    transition: color 0.2s;
}
.star-rating-input .star.active {
    color: #ffc107; /* ì±„ì›Œì§„ ë³„ ìƒ‰ìƒ (ë…¸ë€ìƒ‰) */
}

/* í…ìŠ¤íŠ¸ ì…ë ¥ì°½ ìŠ¤íƒ€ì¼ */
.modal-content textarea {
    width: 100%;
    height: 120px;
    padding: 15px;
    border: 1px solid #ddd;
    border-radius: 8px;
    resize: none; /* í¬ê¸° ì¡°ì ˆ ë°©ì§€ */
    margin-bottom: 20px;
    font-size: 14px;
}

/* ë²„íŠ¼ ì»¨í…Œì´ë„ˆ ë° ìŠ¤íƒ€ì¼ */
.modal-buttons {
    display: flex;
    gap: 10px;
}
.modal-buttons button {
    flex: 1; /* ë‘ ë²„íŠ¼ì´ ë™ì¼í•œ ë„ˆë¹„ë¥¼ ê°€ì§ */
    padding: 12px;
    font-size: 16px;
    font-weight: bold;
    border-radius: 8px;
    cursor: pointer;
    border: none;
}
.btn-cancel {
    background-color: white;
    color: #555;
    border: 1px solid #ddd !important; /* ì·¨ì†Œ ë²„íŠ¼ í…Œë‘ë¦¬ */
}
.btn-submit {
    background-color: #00c471; /* ì¸í”„ëŸ° ìŠ¤íƒ€ì¼ ì´ˆë¡ìƒ‰ */
    color: white;
}
</style>
<script type="text/javascript">
$(function() {
	/* 
	$("#btnWrite").click(function() {
		location.href = "/lecture/review/reviewWriteFrm?lectId=[[${param.lectId}]]&currentPage=[[${param.currentPage}]]";
	}); // click
	*/
	
	$("#btnSearch").click(function() {
		searchReview();
	}); // click
	
	$("#keyword").keyup(function(evt) {
		if(evt.which == 13) {
			searchReview();
		} // end if
	}); // keyup
	
	$("#btn-submit").click(function() {
		// ì œëª©ê³¼ ë‚´ìš©ì— ê°’ì´ ìˆëŠ”ì§€ ìœ íš¨ì„± ê²€ì¦
		if($("#score").val().trim() == "0") {
			alert("í‰ì ì€ í•„ìˆ˜ ì…ë ¥ì…ë‹ˆë‹¤.");
			return;
		} // end if
		
		if($("#content").val() == "" || $("#content").val() == "<p></p>") {
			alert("ë‚´ìš©ì€ í•„ìˆ˜ ì…ë ¥ì…ë‹ˆë‹¤.");
			$("#content").focus();
			return;
		} // end if
		
		$("#frm").submit();
	}); // click
	
}); // ready

function searchReview() {
	if($("#keyword").val().trim() != "") {
		$("#reviewSearchFrm").submit();
	} // end if
} // searchReview

document.addEventListener('DOMContentLoaded', function() {
    const modal = document.getElementById('reviewModal');
    const openBtn = document.getElementById('btnWrite');
    const closeBtn = document.getElementById('closeModalBtn');
    
    // 1. ëª¨ë‹¬ ì—´ê¸° / ë‹«ê¸°
    if (openBtn) { // ğŸŒŸ openBtn(btnWrite)ì´ í™”ë©´ì— ì¡´ì¬í•  ë•Œë§Œ ì´ë²¤íŠ¸ë¥¼ ì¶”ê°€í•˜ë„ë¡ ë³€ê²½
    	openBtn.addEventListener('click', () => modal.style.display = 'flex');
	}
    closeBtn.addEventListener('click', () => modal.style.display = 'none');
    
    // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸° (ì„ íƒ ì‚¬í•­)
    window.addEventListener('click', (e) => {
        if (e.target === modal) modal.style.display = 'none';
    });
	
    // 2. ë³„ì  í´ë¦­ ë¡œì§
    const stars = document.querySelectorAll('.star-rating-input .star');
    const ratingInput = document.getElementById('score');
    let currentRating = 0; // í˜„ì¬ ì„ íƒëœ ì ìˆ˜

    stars.forEach(star => {
        // ë³„ í´ë¦­ ì‹œ
        star.addEventListener('click', function() {
            // í´ë¦­í•œ ë³„ì˜ data-value ê°’ì„ ê°€ì ¸ì˜´ (1~5)
            currentRating = parseInt(this.getAttribute('data-value'));
            ratingInput.value = currentRating; // ìˆ¨ê²¨ì§„ inputì— ê°’ ì €ì¥
            
            // ëª¨ë“  ë³„ì„ ìˆœíšŒí•˜ë©° í´ë¦­í•œ ì ìˆ˜ ì´í•˜ì˜ ë³„ì€ ë…¸ë€ìƒ‰, ì´ˆê³¼ëŠ” íšŒìƒ‰ìœ¼ë¡œ ì²˜ë¦¬
            stars.forEach(s => {
                const starValue = parseInt(s.getAttribute('data-value'));
                if (starValue <= currentRating) {
                    s.classList.add('active');
                } else {
                    s.classList.remove('active');
                }
            });
        });
        
        // (ë³´ë„ˆìŠ¤) ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë ¸ì„ ë•Œ í´ë¦­í•˜ì§€ ì•Šì•„ë„ ì„ì‹œë¡œ ì±„ì›Œì§€ëŠ” í˜¸ë²„ íš¨ê³¼
        star.addEventListener('mouseover', function() {
            const hoverValue = parseInt(this.getAttribute('data-value'));
            stars.forEach(s => {
                if (parseInt(s.getAttribute('data-value')) <= hoverValue) {
                    s.classList.add('active');
                } else {
                    s.classList.remove('active');
                }
            });
        });

        // ë§ˆìš°ìŠ¤ë¥¼ ë–¼ë©´ ì›ë˜ í´ë¦­í–ˆë˜ ì ìˆ˜ë¡œ ì›ìƒë³µêµ¬
        star.addEventListener('mouseout', function() {
            stars.forEach(s => {
                if (parseInt(s.getAttribute('data-value')) <= currentRating) {
                    s.classList.add('active');
                } else {
                    s.classList.remove('active');
                }
            });
        });
    });
    
	// ğŸŒŸ [ì¶”ê°€ë¨] ìˆ˜ì • ëª¨ë‹¬ ë¡œì§ ì‹œì‘
    const modifymodal = document.getElementById('reviewModifyModal');
    const closeModifyBtn = document.getElementById('closeModifyModalBtn');
    
    // 1. ìˆ˜ì • ëª¨ë‹¬ ë‹«ê¸°
    closeModifyBtn.addEventListener('click', () => {
        modifymodal.style.display = 'none';
    });
    
    // 2. ìˆ˜ì • ëª¨ë‹¬ ë‚´ì˜ ë³„ì  ì»¨íŠ¸ë¡¤ ë¡œì§
    const modifyStars = document.querySelectorAll('.modify-star-rating .star');
    const modifyRatingInput = document.getElementById('modifyScore');
    let currentModifyRating = 0;

    // ë³„ì ì„ í™”ë©´ì— ê·¸ë¦¬ëŠ” í•¨ìˆ˜
    function setModifyStars(rating) {
        currentModifyRating = rating;
        modifyRatingInput.value = rating;
        modifyStars.forEach(s => {
            if (parseInt(s.getAttribute('data-value')) <= rating) {
                s.classList.add('active');
            } else {
                s.classList.remove('active');
            }
        });
    }

    modifyStars.forEach(star => {
        star.addEventListener('click', function() {
            setModifyStars(parseInt(this.getAttribute('data-value')));
        });
        star.addEventListener('mouseover', function() {
            const hoverValue = parseInt(this.getAttribute('data-value'));
            modifyStars.forEach(s => {
                s.classList.toggle('active', parseInt(s.getAttribute('data-value')) <= hoverValue);
            });
        });
        star.addEventListener('mouseout', function() {
            setModifyStars(currentModifyRating);
        });
    });

    // 3. ìˆ˜ì • ë²„íŠ¼ í´ë¦­ ì‹œ ì„œë²„ì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° (AJAX)
    const modifyBtns = document.querySelectorAll('.btn-reviewModify'); // ìˆ˜ì •ëœ classë¡œ ì„ íƒ
    modifyBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            const reviewId = this.getAttribute('data-review-id');
            
            // Controllerì— ìƒˆë¡œ ì¶”ê°€í•  AJAX ì „ìš© ë©”ì„œë“œë¡œ ìš”ì²­
            fetch(`/lecture/review/reviewDetailAjax?reviewId=${reviewId}`)
                .then(response => response.json())
                .then(data => {
                    // ëª¨ë‹¬ ë‚´ë¶€ì— ë°ì´í„° ì„¸íŒ…
                    document.getElementById('modifyReviewIdValue').value = data.review_id;
                    document.getElementById('modifyContent').value = data.content;
                    setModifyStars(data.score); // DBì— ì €ì¥ëœ ë³„ì  ì„¸íŒ…
                    
                    modifymodal.style.display = 'flex'; // ìˆ˜ì • ëª¨ë‹¬ ë„ìš°ê¸°
                })
                .catch(error => {
                    alert('ë¦¬ë·° ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                    console.error('Error:', error);
                });
        });
    });

    // 4. ìˆ˜ì •í•˜ê¸°(ì €ì¥) ë²„íŠ¼ í´ë¦­ ì‹œ ìœ íš¨ì„± ê²€ì‚¬ ë° ì „ì†¡
    document.getElementById('btn-modify-submit').addEventListener('click', function() {
		
    	if(confirm("ìˆ˜ê°•í‰ì„ ì •ë§ ìˆ˜ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
	        if($("#modifyScore").val().trim() == "0") {
	            alert("í‰ì ì€ í•„ìˆ˜ ì…ë ¥ì…ë‹ˆë‹¤.");
	            return;
	        } 
	        if($("#modifyContent").val().trim() == "") {
	            alert("ë‚´ìš©ì€ í•„ìˆ˜ ì…ë ¥ì…ë‹ˆë‹¤.");
	            $("#modifyContent").focus();
	            return;
	        }
	        document.getElementById('modifyFrm').submit();
    	}
    });
    
 	// ğŸŒŸ 5. ì‚­ì œ ë²„íŠ¼ í´ë¦­ ë¡œì§ ì¶”ê°€
    const deleteBtns = document.querySelectorAll('.btn-reviewDelete');
    
    deleteBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            if(confirm('ìˆ˜ê°•í‰ì„ ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                // í´ë¦­í•œ ë²„íŠ¼ì—ì„œ review_id ê°€ì ¸ì˜¤ê¸°
                const reviewId = this.getAttribute('data-review-id');
                
                // ì„œë²„ë¡œ ì „ì†¡í•  ê°€ìƒì˜ í¼(form) ë™ì  ìƒì„±
                const deleteForm = document.createElement('form');
                deleteForm.method = 'POST';
                deleteForm.action = `/lecture/review/reviewRemoveProcess?lectId=[[${param.lectId}]]&currentPage=[[${param.currentPage}]]`;
                
                // review_idë¥¼ ë‹´ì„ hidden input ìƒì„±
                const idInput = document.createElement('input');
                idInput.type = 'hidden';
                idInput.name = 'review_id';
                idInput.value = reviewId;
                
                // í¼ì— inputì„ ë„£ê³  bodyì— ì¶”ê°€í•œ ë’¤ ê°•ì œ ì œì¶œ(submit)
                deleteForm.appendChild(idInput);
                document.body.appendChild(deleteForm);
                deleteForm.submit(); 
            }
        });
    });
});
</script>
</head>
<body>
<div id = "wrap">
<div id = "header">
<th:block th:replace = "~{//fragments/MyHeader :: header}"/>
</div>
<div id = "container">
<div id = "sectorHead">
	<div id = "headName">ìˆ˜ê°•í‰</div>
	<div id = "headCount"><span id = "headCountGray">ì „ì²´ </span><span th:text = "|${totalCount}ê°œ|">ë¦¬ë·° ê°œìˆ˜ê°œ</span></div>
</div>
<div id = "reviewList">
	<div id = "btnWriteContainer" th:if="${myReview == null}">
		<div id = "containerText">
			<span id = "star"> â˜… </span><span id = "containerTitle">ìˆ˜ê°•í‰ì„ ë‚¨ê²¨ì£¼ì„¸ìš”</span><br/>
			<span id = "containerContent">ì—¬ëŸ¬ë¶„ì˜ ì†Œì¤‘í•œ ìˆ˜ê°•í‰ì´ ë‹¤ë¥¸ í•™ìŠµìë“¤ì—ê²Œ í° ë„ì›€ì´ ë©ë‹ˆë‹¤.</span><br/>
			<span id = "containerContent">ê°„ë‹¨í•œ í”¼ë“œë°±ì„ ë‚¨ê²¨ì£¼ì„¸ìš”.</span>
		</div>
		<div id = "containerButton">
			<input type = "button" value = "ìˆ˜ê°•í‰ ë‚¨ê¸°ê¸°" class = "btn" id = "btnWrite"/>
		</div>
	</div>
	<div id = "reviewStats">
		<div id = "statAvgScore"><strong><span th:text = "${#numbers.formatDecimal(avgScore, 1, 1)}">ë¦¬ë·° í‰ê·  ì ìˆ˜</span></strong></div>
		<div class="statStarRate">
		    <span>â˜…â˜…â˜…â˜…â˜…</span>
		    <span class="fill" th:style="'width:' + ${avgScore * 20} + '%'">â˜…â˜…â˜…â˜…â˜…</span>
		</div>
		<div id = "statReviewCount"><strong><span th:text = "${totalCount}">ë¦¬ë·° ê°œìˆ˜</span>ê°œì˜ ìˆ˜ê°•í‰</strong></div>
	</div>
	<div id="reviewPanel" th:if="${myReview != null}" th:object="${myReview}" style="background-color: #fcfcfc; border: 1px solid #fab005; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
    <div id="reviewHeader">
        <div style="margin-right: 10px;"><img th:src="@{/images/user/profile/{img}(img=*{profile})}" style="width: 50px; height: 50px; border-radius: 25px;"></div>
        <div id="reviewUserNameAndDate">
            <div id="reviewUserName">
                <span th:text="*{name}">ì‘ì„±ì</span> 
                <span style="color: #ff8014; font-size: 13px; font-weight: bold;">(ë‚´ê°€ ì‘ì„±í•œ ìˆ˜ê°•í‰)</span>
            </div>
            <div th:text="*{#dates.format(regdate, 'yyyy. MM. dd')}" id="reviewDate">ì‘ì„±ì¼</div>
        </div>
        <div class="reviewPopUpMenu">
            <input type="button" class="reviewPopUpMenuBtn" value="Â·Â·Â·"/>
            <div class="popupMenu">
                <input type="button" class="popupMenuBtn btn-reviewModify" th:data-review-id="*{review_id}" value="ìˆ˜ì •"/>
                <input type="button" class="popupMenuBtn btn-reviewDelete" th:data-review-id="*{review_id}" value="ì‚­ì œ"/>
            </div>
        </div>
    </div>
    <div id="reviewScoreSet">
        <div class="reviewStarRate">
            <span>â˜…â˜…â˜…â˜…â˜…</span>
            <span class="fill" th:style="'width:' + *{score * 20} + '%'">â˜…â˜…â˜…â˜…â˜…</span>
        </div>
        <div th:text="*{score}" id="reviewScore">í‰ì </div>
    </div>
    <div th:utext="*{content}" style="margin-bottom: 10px;">ë¦¬ë·° ë‚´ìš©</div>
	</div>
	<div id = "reviewPanel" th:each = "reviewDomain, i : ${reviewList}" th:object = "${reviewDomain}" th:unless="${sessionUserId == reviewDomain.user_id}">
		<div id = "partingLine"></div>
		<div id = "reviewHeader">
			<div style = "margin-right: 10px;"><img th:src = "@{/images/user/profile/{img}(img=*{profile})}" style = "width: 50px; height: 50px; border-radius: 25px;"></div>
			<div id = "reviewUserNameAndDate">
				<div th:text = "*{name}" id = "reviewUserName">ì‘ì„±ì ë‹‰ë„¤ì„</div>
				<div th:text = "*{#dates.format(regdate, 'yyyy. MM. dd')}" id = "reviewDate">ì‘ì„±ì¼</div>
			</div>
		</div>
		<div id = "reviewScoreSet">
			<div class="reviewStarRate">
			    <span>â˜…â˜…â˜…â˜…â˜…</span>
			    <span class="fill" th:style="'width:' + *{score * 20} + '%'">â˜…â˜…â˜…â˜…â˜…</span>
			</div>
			<div th:text = "*{score}" id = "reviewScore">í‰ì </div>
		</div>
		<div th:utext = "*{content}" style = "margin-bottom: 10px;">ë¦¬ë·° ë‚´ìš©</div>
	</div>
	<div id = "partingLine"></div>
	
	<table class = "table table-hover">
	<thead>
	<tr>
		<th style = "width: 100px">í”„ë¡œí•„</th>
		<th style = "width: 340px">ë‚´ìš©</th>
		<th style = "width: 120px">ì‘ì„±ì ë‹‰ë„¤ì„</th>
		<th style = "width: 120px">ì‘ì„±ì ID</th>
		<th style = "width: 80px">í‰ì </th>
		<th style = "width: 200px">ì‘ì„±ì¼</th>
	</tr>
	</thead>
	<tbody>
	<th:block th:if = "${reviewList.empty}">
	<tr>
		<td colspan = "5" style = "text-align: center;">ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</td>
	</tr>
	</th:block>
	<tr th:each = "reviewDomain, i : ${reviewList}" th:object = "${reviewDomain}">
		<td th:text = "*{profile}">í”„ë¡œí•„</td>
		<td><a th:href = "@{{url}(url = '/lecture/review/reviewDetail', reviewId = *{review_id}, lectId = ${param.lectId}, currentPage = ${param.currentPage})}"><span th:utext = "*{content}">ë‚´ìš©</span></a></td>
		<td th:text = "*{name}">ì‘ì„±ì ë‹‰ë„¤ì„</td>
		<td th:text = "*{user_id}">ì‘ì„±ì ID</td>
		<td th:text = "*{score}">í‰ì </td>
		<td th:text = "*{#dates.format(regdate, 'yyyy-MM-dd EEEE')}">ì‘ì„±ì¼</td>
	</tr>
	</tbody>
	</table>
</div>
<div id="reviewModal" class="modal-overlay">
    <div class="modal-content">
        <h2>í˜ì´ ë˜ëŠ” ìˆ˜ê°•í‰ì„ ë‚¨ê²¨ì£¼ì„¸ìš”!</h2>
		<form th:action = "@{{url}(url = '/lecture/review/reviewWriteFrmProcess', lectId = ${param.lectId}, currentPage = ${param.currentPage})}" method = "post" name = "frm" id = "frm">
        
        <div class="star-rating-input">
            <span class="star" data-value="1">â˜…</span>
            <span class="star" data-value="2">â˜…</span>
            <span class="star" data-value="3">â˜…</span>
            <span class="star" data-value="4">â˜…</span>
            <span class="star" data-value="5">â˜…</span>
        </div>
        <input type="hidden" id="score" name="score" value="0">
		
        <textarea name = "content" id = "content" placeholder="ìˆ˜ê°•í‰ì„ ì‘ì„±í•´ë³´ì„¸ìš”!"></textarea>
        <input type = "hidden" name = "lect_id" th:value = "${param.lectId}"/>
		</form>

        <div class="modal-buttons">
            <button class="btn-cancel" id="closeModalBtn">ì·¨ì†Œ</button>
            <button class="btn-submit" id="btn-submit">ì €ì¥í•˜ê¸°</button>
        </div>
    </div>
</div>
<div id="reviewModifyModal" class="modal-overlay">
    <div class="modal-content">
        <h2>ìˆ˜ê°•í‰ ìˆ˜ì •í•˜ê¸°</h2>
		<form th:action="@{{url}(url = '/lecture/review/reviewModifyProcess', lectId = ${param.lectId}, currentPage = ${param.currentPage})}" method="post" name="modifyFrm" id="modifyFrm">
        
        <input type="hidden" id="modifyReviewIdValue" name="review_id" value="0">
        <input type="hidden" id="modifyScore" name="score" value="0">
        
        <div class="star-rating-input modify-star-rating">
            <span class="star" data-value="1">â˜…</span>
            <span class="star" data-value="2">â˜…</span>
            <span class="star" data-value="3">â˜…</span>
            <span class="star" data-value="4">â˜…</span>
            <span class="star" data-value="5">â˜…</span>
        </div>
		
        <textarea name="content" id="modifyContent" placeholder="ìˆ˜ê°•í‰ì„ ìˆ˜ì •í•´ë³´ì„¸ìš”!"></textarea>
        <input type="hidden" name="lect_id" th:value="${param.lectId}"/>
		</form>
		
        <div class="modal-buttons">
            <button class="btn-cancel" type="button" id="closeModifyModalBtn">ì·¨ì†Œ</button>
            <button class="btn-submit" type="button" id="btn-modify-submit">ìˆ˜ì •í•˜ê¸°</button>
        </div>
    </div>
</div>
<div id = "reviewSearchDiv" style = "text-align: center">
	<form th:action = "@{/lecture/review/reviewList}" id = "reviewSearchFrm">
	<select name = "field" id = "field" style = "height: 30px">
	<option value = "1" th:selected = "${param.field ne null and param.field[0] eq '1'}">ë‚´ìš©</option>
	<option value = "2" th:selected = "${param.field ne null and param.field[0] eq '2'}">ì‘ì„±ì</option>
	</select>
	<input type = "text" name = "keyword" id = "keyword" th:value = "${param.keyword}" style = "height: 30px;"/>
	<input type = "hidden" name = "currentPage" id = "currentPage" th:value = "${param.currentPage eq null ? 1 : param.currentPage}"/>
	<input type = "hidden" name = "lectId" id = "lectId" th:value = "${param.lectId}"/>
	<input type = "text" style = "display: none"/>
	<input type = "button" value = "ê²€ìƒ‰" id = "btnSearch" class = "btn btn-success btn-sm"/>
	</form>
</div>
<div id = "pagination" style = "text-align: center; display: flex; justify-content: center; align-items: center;">
	<div th:utext = "${pagination}"></div>
</div>
</div>
<div id = "footer">
<!--
<th:block th:replace = "~{//fragments/MyFooter :: footer}"/>
-->
</div>
</div>
</body>
</html>