<!DOCTYPE html>
<html xmlns:th = "http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<th:block th:replace = "~{//fragments/cdn :: cdn}"/>
<style type = "text/css">
#wrap{margin: 0px auto; width: 1000px; height: 1200px}
#header{height: 150px}
#container{height: 950px}
#footer{height: 100px}
</style>
<script type="text/javascript">
$(function() {
	$("#btnWrite").click(function() {
		location.href = "/lecture/review/reviewWriteFrm?lectId=[[${param.lectId}]]&amp;currentPage=[[${param.currentPage}]]";
	}); // click
	
	$("#btnSearch").click(function() {
		searchReview();
	}); // click
	
	$("#keyword").keyup(function(evt) {
		if(evt.which == 13) {
			searchReview();
		} // end if
	}); // keyup
}); // ready

function searchReview() {
	if($("#keyword").val().trim() != "") {
		$("#reviewSearchFrm").submit();
	} // end if
} // searchReview
</script>
</head>
<body>
<div id = "wrap">
<div id = "header">
</div>
<div id = "container">
<div id = "reviewList" style = "min-height: 500px">
	<input type = "button" value = "글쓰기" class = "btn btn-success btn-sm" id = "btnWrite"/>
	<table class = "table table-hover">
	<thead>
	<tr>
		<th style = "width: 80px">번호</th>
		<th style = "width: 450px">내용</th>
		<th style = "width: 150px">작성자 ID</th>
		<th style = "width: 80px">평점</th>
		<th style = "width: 200px">작성일</th>
	</tr>
	</thead>
	<tbody>
	<th:block th:if = "${reviewList.empty}">
	<tr>
		<td colspan = "5" style = "text-align: center;">게시글이 없습니다.</td>
	</tr>
	</th:block>
	<tr th:each = "reviewDomain, i : ${reviewList}" th:object = "${reviewDomain}">
		<td th:text = "${listNum - i.index}">번호</td>
		<td><a th:href = "@{{url}(url = '/lecture/review/reviewDetail', reviewId = *{review_id}, lectId = ${param.lectId}, currentPage = ${param.currentPage})}"><span th:text = "*{content}">내용</span></a></td>
		<td th:text = "*{user_id}">작성자 ID</td>
		<td th:text = "*{score}">평점</td>
		<td th:text = "*{#dates.format(regdate, 'yyyy-MM-dd EEEE')}">작성일</td>
	</tr>
	</tbody>
	</table>
</div>
<div id = "reviewSearchDiv" style = "text-align: center">
	<form th:action = "@{/lecture/review/reviewList}" id = "reviewSearchFrm">
	<select name = "field" id = "field" style = "height: 30px">
	<option value = "1" th:selected = "${param.field ne null and param.field[0] eq '1'}">내용</option>
	<option value = "2" th:selected = "${param.field ne null and param.field[0] eq '2'}">작성자</option>
	</select>
	<input type = "text" name = "keyword" id = "keyword" th:value = "${param.keyword}" style = "height: 30px;"/>
	<input type = "hidden" name = "currentPage" id = "currentPage" th:value = "${param.currentPage eq null ? 1 : param.currentPage}"/>
	<input type = "hidden" name = "lectId" id = "lectId" th:value = "${param.lectId}"/>
	<input type = "text" style = "display: none"/>
	<input type = "button" value = "검색" id = "btnSearch" class = "btn btn-success btn-sm"/>
	</form>
</div>
<div id = "pagination" style = "text-align: center; display: flex; justify-content: center; align-items: center;">
	<div th:utext = "${pagination}"></div>
</div>
</div>
<div id = "footer">
</div>
</div>
</body>
</html>