<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>구매 내역</title>
    <link rel="stylesheet" href="/css/user-mypage.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div th:replace="~{fragments/MyHeader :: header}"></div>

    <div class="mypage-container">
        <div th:replace="~{fragments/MySidebar :: sidebar('payrec')}"></div>

        <div class="mypage-content">
            <h2 class="page-title">구매 내역</h2>
            
            <div class="tab-menu">
                <div class="tab-btn active">강의</div>
            </div>

            <div th:if="${#lists.isEmpty(purchaseList)}" class="empty-state">
                <div class="empty-icon"><i class="fas fa-feather-alt"></i></div>
                <p style="font-size:18px; font-weight:700; margin-bottom:8px;">아직 구매 내역이 없어요</p>
                <p style="font-size:14px; color:#888; margin-bottom:24px;">나를 성장시켜줄 새로운 지식을 찾아보세요</p>
                <a href="/" class="btn-outline">강의 리스트 보기</a>
            </div>

            <div th:unless="${#lists.isEmpty(purchaseList)}" style="display: flex; flex-direction: column; gap: 15px;">
                <th:block th:each="pay : ${purchaseList}">
                    <div class="cart-item" style="align-items: center;">
                        <div class="item-left">
                            <div class="item-thumb">
                                <img th:src="${pay.lectThumbnail != null ? pay.lectThumbnail : 'https://via.placeholder.com/120x75?text=No+Img'}" 
                                     onerror="this.src='https://via.placeholder.com/120x75?text=Inflearn'"
                                     alt="강의 이미지">
                            </div>
                            <div class="item-infos">
                                <div class="item-name" th:text="${pay.lectName}">강의 제목</div>
                                <div style="font-size:13px; color:#888;">
                                    <span th:text="${pay.instName}">강사명</span> • 
                                    <span th:text="${#dates.format(pay.time, 'yyyy.MM.dd')}">2026.01.01</span>
                                </div>
                            </div>
                        </div>
                        <div class="item-right">
                            <div class="price-box">
                                <span class="final" th:text="${#numbers.formatInteger(pay.lectPrice, 0, 'COMMA') + '원'}">19,800원</span>
                            </div>
                            <div style="margin-top:5px; font-size:13px; color:#00c471; font-weight:bold;">결제완료</div>
                        </div>
                    </div>
                </th:block>
            </div>

        </div>
    </div>
</body>
</html>