<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>구매 내역</title>
    <link rel="stylesheet" href="/css/user-mypage.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div th:replace="~{fragments/MyHeader :: header}"></div>

    <div class="mypage-container">
        <div th:replace="~{fragments/MySidebar :: sidebar('payrec')}"></div>

        <div class="mypage-content">
            <h2 class="page-title">구매 내역</h2>
            
            <div class="tab-menu">
                <div class="tab-btn active">강의</div>
            </div>

            <div th:if="${#lists.isEmpty(purchaseList)}" class="empty-state">
			    <div class="empty-icon"><i class="fas fa-feather-alt"></i></div>
			    <p style="font-size:18px; font-weight:700; margin-bottom:8px;">아직 구매 내역이 없어요</p>
			    <p style="font-size:14px; color:#888; margin-bottom:24px;">나를 성장시켜줄 새로운 지식을 찾아보세요</p>
			    <a href="/" class="btn-outline">강의 보러가기</a>
			</div>

			<div th:unless="${#lists.isEmpty(purchaseList)}" class="purchase-table-wrap">
			    <table class="purchase-table">
			        <colgroup>
			            <col width="15%"> <col width="35%"> <col width="15%"> <col width="15%"> <col width="10%"> <col width="10%"> </colgroup>
			        <thead>
			            <tr>
			                <th>이미지</th>
			                <th>강의명</th>
			                <th>강사</th>
			                <th>구매날짜</th>
			                <th>가격</th>
			                <th>결제 상태</th>
			            </tr>
			        </thead>
			        <tbody>
			            <th:block th:each="pay : ${purchaseList}">
			                <tr>
			                    <td class="td-thumb">
			                        <img
									 th:src="|${imgPath}${pay.lectThumbnail}|"
									 alt="썸네일"
									 onerror="this.src = '/common/images/default.png'"
									 />
			                    </td>
			                    <td class="td-name" th:text="${pay.lectName}">강의 제목</td>
			                    <td th:text="${pay.instName}">강사명</td>
			                    <td th:text="${#dates.format(pay.time, 'yyyy.MM.dd')}">2026.01.01</td>
			                    <td class="td-price" th:text="${#numbers.formatInteger(pay.lectPrice, 0, 'COMMA') + '원'}">19,800원</td>
			                    <td><span class="status-badge">결제완료</span></td>
			                </tr>
			            </th:block>
			        </tbody>
			    </table>
			</div>

        </div>
    </div>
</body>
</html>