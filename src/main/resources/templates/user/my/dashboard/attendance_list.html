<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<div th:fragment="attendFragment">
    
    <div th:if="${rangeType == '주간'}">
        <div style="display: flex; align-items: flex-end; justify-content: space-around; height: 150px; border-bottom: 2px solid #ddd; padding-bottom: 5px;">
            <div style="text-align: center; width: 100%;">
                <p style="margin-bottom: 20px; font-size: 18px;">
                    이번 주 총 출석일: <span style="color:#2ecc71; font-weight:bold; font-size:24px;" th:text="${#lists.size(attendList)}">0</span>일
                </p>
                
                <table style="width: 100%; border-collapse: collapse; margin-top: 10px;">
                    <tr style="background: #f9f9f9;">
                        <th>출석 날짜</th>
                        <th>상태</th>
                    </tr>
                    <tr th:if="${#lists.isEmpty(attendList)}">
                        <td colspan="2" style="padding:15px; color:#999;">출석 기록이 없습니다.</td>
                    </tr>
                    <tr th:each="att : ${attendList}">
                        <td style="padding:10px; border-bottom:1px solid #eee;" th:text="${att.attendDate}"></td>
                        <td style="padding:10px; border-bottom:1px solid #eee; color: green; font-weight: bold;">✅ 출석함</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

    <div th:if="${rangeType == '월간'}">
        <div style="padding: 20px;">
            <p style="margin-bottom: 10px;">
                이번 달 출석률: 
                <span th:with="percent=${#lists.size(attendList) * 100 / totalDays}">
                    <span style="color:#e67e22; font-weight:bold; font-size:20px;" th:text="${percent} + '%'">0%</span>
                    (<span th:text="${#lists.size(attendList)}">0</span> / <span th:text="${totalDays}">30</span>일)
                </span>
            </p>
            
            <div style="width: 100%; background-color: #eee; border-radius: 20px; height: 30px; overflow: hidden;">
                <div th:with="percent=${#lists.size(attendList) * 100 / totalDays}"
                     th:style="'width:' + ${percent} + '%; background-color: #3498db; height: 100%; line-height:30px; color:white; text-align:center; transition: width 1s;'">
                     <span th:if="${percent > 5}" th:text="${percent} + '%'"></span>
                </div>
            </div>
            
            <p style="margin-top: 15px; font-size: 13px; color: #777;">* 월간 출석은 캘린더 형태보다 전체 달성률 확인이 중요합니다.</p>
        </div>
    </div>

</div>
</body>
</html>