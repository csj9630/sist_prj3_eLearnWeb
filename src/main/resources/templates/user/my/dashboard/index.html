<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>í•™ìŠµ ëŒ€ì‹œë³´ë“œ</title>
<style>
    body { font-family: 'Noto Sans KR', sans-serif; padding: 40px; background-color: #f4f6f8; }
    .dashboard-container { display: flex; gap: 30px; }
    
    /* ì™¼ìª½: ê°•ì˜ ì •ë³´ & ìµœê·¼ í•™ìŠµ */
    .left-panel { flex: 2; }
    .lecture-header { background: white; padding: 30px; border-radius: 10px; margin-bottom: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
    .lecture-title { font-size: 24px; font-weight: bold; margin-bottom: 10px; }
    
    /* ì˜¤ë¥¸ìª½: ì¶œì„ë¶€ */
    .right-panel { flex: 1; background: white; padding: 25px; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); height: fit-content; }
    
    .section-title { font-size: 18px; font-weight: bold; margin-bottom: 15px; color: #555; border-left: 4px solid #3498db; padding-left: 10px; }
    
    /* ìµœê·¼ í•™ìŠµ ë¦¬ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
    .recent-item { display: flex; align-items: center; background: #fff; border: 1px solid #eee; padding: 15px; margin-bottom: 10px; border-radius: 8px; }
    .recent-thumb { width: 80px; height: 50px; object-fit: cover; margin-right: 15px; background: #ddd; }
    .recent-info { flex: 1; }
    .recent-name { font-weight: bold; font-size: 15px; }
    .recent-date { font-size: 12px; color: #888; }
    
    /* ì¶œì„ë¶€ ìŠ¤íƒ€ì¼ */
    .attend-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; margin-top: 15px; text-align: center; }
    .attend-day { width: 30px; height: 30px; line-height: 30px; border-radius: 50%; background: #eee; font-size: 12px; margin: 0 auto; }
    .attended { background-color: #2ecc71; color: white; font-weight: bold; }
</style>
</head>
<body>

    <h2 style="margin-bottom: 30px;">ğŸ“ í•™ìŠµ ëŒ€ì‹œë³´ë“œ</h2>

    <div class="dashboard-container">
        <div class="left-panel">
           <div class="lecture-header" th:if="${lect != null}" style="display: flex; gap: 20px;">
                <div style="flex-shrink: 0;">
                    <img th:src="@{/images/lecture/{img}(img=${lect.thumbnail})}" 
                         style="width: 200px; height: 140px; object-fit: cover; border-radius: 8px; border: 1px solid #ddd;"
                         onerror="this.src='https://placehold.co/200x140'"/>
                </div>

                <div style="flex-grow: 1;">
                    <div style="margin-bottom: 5px;">
                        <span style="background: #eef2f3; color: #555; font-size: 12px; padding: 3px 8px; border-radius: 4px;" th:text="${lect.catName}">ì¹´í…Œê³ ë¦¬</span>
                    </div>
                    <div class="lecture-title" th:text="${lect.lectName}" style="margin-top: 5px;">ê°•ì˜ëª…</div>
                    
                    <p th:text="${lect.shortIntro}" style="color: #666; font-size: 14px; margin-bottom: 10px;">ê°•ì˜ ìš”ì•½ ì„¤ëª…</p>
                    
                    <div style="display: flex; flex-wrap: wrap; gap: 15px; font-size: 13px; color: #555; margin-bottom: 15px;">
                        <span>ğŸ‘¨â€ğŸ« <span th:text="${lect.instName}">ê°•ì‚¬ëª…</span></span>
                        <span>ğŸ“š <span th:text="${lect.totalChapter} + 'ê°•'">0ê°•</span></span>
                        <span>â° <span th:text="${lect.length} + 'ë¶„'">0ë¶„</span></span>
                        <span>ğŸ‘¥ <span th:text="${#numbers.formatInteger(lect.userCount, 0, 'COMMA')} + 'ëª…'">0ëª…</span></span>
                        <span>ğŸ“… <span th:text="${#dates.format(lect.regDate, 'yyyy-MM-dd')}">ë“±ë¡ì¼</span></span>
                    </div>

                    <div style="font-size: 13px; color: #888; margin-bottom: 15px; line-height: 1.4;">
                        <span th:text="${lect.intro}">ê°•ì˜ ì†Œê°œê¸€ ë‚´ìš©...</span>
                    </div>

                    <div style="display: flex; align-items: center; gap: 20px;">
                        <div style="flex-grow: 1;">
                            <div style="display: flex; justify-content: space-between; font-size: 12px; margin-bottom: 3px;">
                                <span>ì§„ë„ìœ¨</span>
                                <span th:text="${lect.progRate} + '%'" style="font-weight: bold; color: #3498db;">0%</span>
                            </div>
                            <div style="width: 100%; height: 8px; background:#eee; border-radius:4px;">
                                <div th:style="|width:${lect.progRate}%; height:100%; background:#3498db; border-radius:4px;|"></div>
                            </div>
                        </div>
                        
                        <a href="/user/my/dashboard/learning" 
                           style="background-color: #3498db; color: white; text-decoration: none; padding: 10px 20px; border-radius: 5px; font-weight: bold; font-size: 14px; white-space: nowrap;">
                           í•™ìŠµí•˜ëŸ¬ ê°€ê¸° â–¶
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="lecture-header" th:if="${lect == null}" style="text-align: center; padding: 40px;">
                <p style="font-size: 18px; color: #888;">ê°•ì˜ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                <a href="/user/my/lecture/searchMyLecture" style="color: #3498db; text-decoration: underline;">ë‚´ ê°•ì˜ì‹¤ì—ì„œ ì„ íƒí•˜ê¸°</a>
            </div>
    
    <div class="lecture-header" th:if="${lect == null}">
        <div class="lecture-title">ê°•ì˜ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</div>
        <p>ìˆ˜ê°• ëª©ë¡ì—ì„œ ê°•ì˜ë¥¼ ì„ íƒí•˜ë©´ ìƒì„¸ ì •ë³´ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
    </div>

            <h3 class="section-title">ìµœê·¼ í•™ìŠµ ê¸°ë¡</h3>
            <div th:if="${#lists.isEmpty(recentList)}" style="padding: 20px; color:#888;">
                ì•„ì§ í•™ìŠµ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.
            </div>
            <div th:each="recent : ${recentList}" class="recent-item">
                <img th:src="@{/images/lecture/{img}(img=${recent.thumbnail})}" class="recent-thumb">
                <div class="recent-info">
                    <div class="recent-name" th:text="${recent.chptrName}">ì±•í„°ëª…</div>
                    <div class="recent-date" th:text="'ë§ˆì§€ë§‰ í•™ìŠµ: ' + ${#dates.format(recent.lastDate, 'yyyy-MM-dd HH:mm')}">ë‚ ì§œ</div>
                </div>
                <button style="padding: 5px 15px; background: #3498db; color: white; border: none; border-radius: 4px; cursor: pointer;">ì´ì–´í•˜ê¸°</button>
            </div>
        </div>

        <div class="right-panel">
            <h3 class="section-title">ğŸ“… ì£¼ê°„ ì¶œì„ë¶€</h3>
            <div class="attend-grid">
                <<div th:each="att : ${attendList}" class="attend-day attended" th:text="${#dates.format(att.attendDate, 'dd')}">1</div>
            </div>
            <p style="margin-top: 15px; font-size: 13px; color: #666;">
                * ì´ë²ˆ ì£¼ ì¶œì„ ë‚´ì—­ì…ë‹ˆë‹¤.
            </p>
        </div>
    </div>
    
    <div style="margin-top: 30px; text-align: center;">
        <a href="/user/my/lecture/searchMyLecture" style="color: #555; text-decoration: none;">ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
    </div>

</body>
</html>