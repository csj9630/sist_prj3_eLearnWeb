<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<<<<<<< HEAD
<title>ê°•ì‚¬ ìˆ˜ìµ í™•ì¸</title>
<style>
    body { font-family: 'Noto Sans KR', sans-serif; padding: 30px; text-align: center; background-color: #fff8e1; }
    .container { max-width: 900px; margin: 0 auto; background: white; padding: 30px; border-radius: 15px; border: 1px solid #e67e22; }
    h1 { color: #d35400; }
    
    .summary-box { display: flex; justify-content: space-around; margin: 30px 0; padding: 20px; background: #fdf2e9; border-radius: 10px; }
    .summary-item h2 { margin: 0; color: #e67e22; }
    
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { border-bottom: 1px solid #ddd; padding: 12px; }
    th { background-color: #e67e22; color: white; }
    
    .btn-home { background-color: #555; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; float: right; margin-bottom: 20px;}
=======
<title>ë‚´ ìˆ˜ìµ ì¡°íšŒ - ê°•ì‚¬ì„¼í„°</title>
<link rel="stylesheet" href="/css/user-mypage.css">
<link rel="stylesheet" href="/css/instructor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<style>
    /* ë°•ìŠ¤ ì „ì²´ ì»¨í…Œì´ë„ˆ (ì¢Œìš° ë¶„í• ) */
    
>>>>>>> refs/heads/dev0220-2
</style>

<script th:inline="javascript">
$(document).ready(function() {
    // 1. Controllerì—ì„œ ë„˜ê²¨ì¤€ searchMonth ê°’ ë°›ê¸° (ì˜ˆ: "2026-02")
    const currentParams = /*[[${searchMonth}]]*/ '2026-02'; 
    
    // "YYYY-MM"ì„ ë¶„ë¦¬
    const parts = currentParams.split('-');
    const currentYear = parseInt(parts[0]);
    const currentMonth = parseInt(parts[1]);

    // 2. ë…„ë„ ë“œë¡­ë‹¤ìš´ ìƒì„± (í˜„ì¬ ë…„ë„ ê¸°ì¤€ ê³¼ê±° 5ë…„ ~ ë¯¸ë˜ 1ë…„)
    const yearSelect = document.getElementById("yearSelect");
    const todayYear = new Date().getFullYear();
    
    for (let y = todayYear + 1; y >= todayYear - 5; y--) {
        let option = document.createElement("option");
        option.value = y;
        option.text = y + "ë…„";
        if (y === currentYear) option.selected = true;
        yearSelect.appendChild(option);
    }

    // 3. ì›” ë“œë¡­ë‹¤ìš´ ìƒì„± (1ì›” ~ 12ì›”)
    const monthSelect = document.getElementById("monthSelect");
    for (let m = 1; m <= 12; m++) {
        let option = document.createElement("option");
        // ê°’ì€ ë‘ ìë¦¬ ë¬¸ìì—´ë¡œ ("01", "02"...)
        let val = String(m).padStart(2, '0');
        option.value = val;
        option.text = m + "ì›”";
        if (m === currentMonth) option.selected = true;
        monthSelect.appendChild(option);
    }
});

// 4. ì¡°íšŒ ë²„íŠ¼ í´ë¦­ ì‹œ ì‹¤í–‰ í•¨ìˆ˜
function searchRevenue() {
    const year = document.getElementById("yearSelect").value;
    const month = document.getElementById("monthSelect").value;
    
    // "YYYY-MM" í˜•íƒœë¡œ í•©ì³ì„œ ì„œë²„ë¡œ ì „ì†¡
    const searchVal = `${year}-${month}`;
    
    location.href = "/instructor/payment/inst_payment?searchMonth=" + searchVal;
}
</script>
</head>
<body>

<<<<<<< HEAD
    <div class="container">
        <a href="/" class="btn-home">ğŸ  ì´ˆê¸° í™”ë©´ìœ¼ë¡œ</a>
        <div style="clear:both;"></div>
        
        <h1>ğŸ’° ê°•ì‚¬ ì •ì‚° ì„¼í„°</h1>
        
        <div class="summary-box">
            <div class="summary-item">
                <h3>ì´ ëˆ„ì  ë§¤ì¶œì•¡</h3>
                <h2 th:text="${#numbers.formatInteger(totalSum, 0, 'COMMA')} + 'ì›'">0ì›</h2>
            </div>
            <div class="summary-item">
                <h3>ì´ ìˆ˜ê°•ìƒ ìˆ˜</h3>
                <h2 th:text="${userCount} + 'ëª…'">0ëª…</h2>
=======
    <div th:replace="~{fragments/InstHeader :: header}"></div>

    <div class="mypage-container" style="display: block; width: 1000px; margin: 50px auto;">
        
        <h2 style="font-size: 24px; font-weight: 700; margin-bottom: 25px;">ë‚´ ìˆ˜ìµ ì¡°íšŒ</h2>

        <div class="revenue-box-compact">
            
            <div class="revenue-left">
                <div class="revenue-label">
                    <i style="color: #ffc107;"></i> ëˆ„ì  ì´ ìˆ˜ì…
                </div>
                <div class="revenue-value">
                    <span th:text="${#numbers.formatInteger(totalRevenue, 0, 'COMMA')}">0</span>ì›
                </div>
            </div>

            <div class="vertical-divider"></div> 

            <div class="revenue-right">
                <div class="revenue-label" style="justify-content: flex-end;">
                    <i style="color: #00c471;"></i> ì›”ë³„ ì •ì‚° ë‚´ì—­
                </div>
                <div class="revenue-control">
                    <select id="yearSelect" class="form-select" style="width: 100px;"></select>
                    
                    <select id="monthSelect" class="form-select" style="width: 80px;"></select>
                    
                    <button type="button" onclick="searchRevenue()" class="btn-search-revenue">
                        <i class="fas fa-search"></i> ì¡°íšŒ
                    </button>
                    
                    <div class="month-amount">
                        <span th:text="${#numbers.formatInteger(monthRevenue, 0, 'COMMA')}">0</span>ì›
                    </div>
                </div>
>>>>>>> refs/heads/dev0220-2
            </div>
        </div>
<<<<<<< HEAD
        
        <h3>ê°•ì˜ë³„ ìƒì„¸ ë§¤ì¶œ</h3>
        <table>
            <thead>
                <tr>
                    <th>ê°•ì˜ëª…</th>
                    <th>ë§¤ì¶œì•¡</th>
                    <th>ìˆ˜ê°•ìƒ ìˆ˜</th>
                </tr>
            </thead>
            <tbody>
                <tr th:if="${#lists.isEmpty(list)}">
                    <td colspan="3">ë§¤ì¶œ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</td>
                </tr>
                <tr th:each="item : ${list}">
                    <td th:text="${item.lectName}"></td>
                    <td th:text="${#numbers.formatInteger(item.totalPrice, 0, 'COMMA')} + 'ì›'"></td>
                    <td th:text="${item.userCount} + 'ëª…'"></td>
                </tr>
            </tbody>
        </table>
=======

        <div style="display: flex; justify-content: space-between; align-items: end; margin-bottom: 10px;">
            <h3 style="font-size: 18px; font-weight: 700;">ê°•ì˜ë³„ ëˆ„ì  ìˆ˜ìµ í˜„í™©</h3>
            <span style="font-size: 13px; color: #888;">* ê²°ì œ ì™„ë£Œëœ ê±´ë§Œ ì§‘ê³„ë©ë‹ˆë‹¤.</span>
        </div>
        
        <div class="inst-table-wrap">
            <table class="inst-table">
                <colgroup>
                    <col width="15%"> 
                    <col width="*">   
                    <col width="20%"> 
                </colgroup>
                <thead>
                    <tr>
                        <th>ì˜¤í”ˆ ë‚ ì§œ</th>
                        <th>ê°•ì˜ ì •ë³´</th>
                        <th>ëˆ„ì  ìˆ˜ìµ</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:if="${#lists.isEmpty(list)}">
                        <td colspan="3" style="padding: 60px 0; text-align: center; color: #858a8d;">
                            <i class="fas fa-exclamation-circle" style="font-size: 24px; margin-bottom: 10px; display: block;"></i>
                            ìˆ˜ìµ ë‚´ì—­ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
                        </td>
                    </tr>

                    <tr th:each="item : ${list}">
                        <td style="text-align: center; color: #666;" th:text="${item.openDate}">2026-02-18</td>
                        
                        <td>
                            <div class="lect-info">
                                <img th:src="${item.thumbnail}" 
                                     onerror="this.src='https://via.placeholder.com/80x50?text=No+Img'" 
                                     class="lect-thumb" alt="ì¸ë„¤ì¼">
                                
                                <div class="lect-text">
                                    <span class="lect-name" th:text="${item.lectName}">ê°•ì˜ëª…</span>
                                    <span class="sales-count">
                                        ê²°ì œì™„ë£Œ: <b th:text="${item.salesCount}">0</b>ê±´
                                    </span>
                                </div>
                            </div>
                        </td>
                        
                        <td style="text-align: right; padding-right: 30px;">
                            <span style="font-size: 16px; font-weight: 700; color: #1b1c1d;" 
                                  th:text="${#numbers.formatInteger(item.totalPrice, 0, 'COMMA')}">0</span>
                            <span style="font-size: 14px; color: #555;">ì›</span>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

>>>>>>> refs/heads/dev0220-2
    </div>

</body>
</html>