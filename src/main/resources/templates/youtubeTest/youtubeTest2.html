<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <!-- bootStrap CDN ---------------------->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
      crossorigin="anonymous"
    ></script>
    <!----------------------- bootStrap CDN -->

    <!-- JQuery 세트 -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <title>Insert title here</title>

    <style type="text/css">
      #wrap {
        margin: 0px auto;
        width: 1200px;
        height: 1000px;
      }
      #header {
        height: 150px;
      }
      #container {
        height: 700px;
      }
      #footer {
        height: 150px;
      }
    </style>

    <!--JS 실습 파트-->
    <script type="text/javascript">
      $(function () {}); //document.ready
    </script>
    <script>
      var tag = document.createElement("script");

      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName("script")[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      function onYouTubeIframeAPIReady() {
        player = new YT.Player("player", {
          //document.write(t1);
          //document.write(t2);

          width: "640",
          height: "360",
          videoId: "<?=$video?>",
          playerVars: {
            autoplay: 1,
            showinfo: 0,
            rel: 0,
            modestbranding: 1,
            wmode: "transparent",
            autohide: 1,
          },
          events: {
            onReady: onPlayerReady,
            onStateChange: onPlayerStateChange,
          },
        });
      }

      // 유투브 객체를 가져오고

      ytplayer = document.getElementById("player");

      // 현재의 시간을 가져오는 함수

      ytplayer.getCurrentTime();

      // 플레이 타임을 가져오는 함수

      ytplayer.getDuration();

      function onPlayerReady(event) {
        event.target.setPlaybackQuality("hd720");
      }

      function onPlayerStateChange(event) {
        if (event.data == YT.PlayerState.PLAYING) {
          event.target.setPlaybackQuality("hd720");
        }
      }
    </script>
  </head>
  <body>
    <div id="wrap">
      <div id="container">
        <h3>Youtube 시간 데이터를 뽑아내는 실험</h3>

        <div>
          <span>동영상 시간 : </span><span th:text="${time}">99:99 </span>
        </div>
        <div id="player"></div>
        <!-- api 테스트 -->

        <!-- api 테스트 -->
      </div>
      <!--container  -->
    </div>
  </body>
</html>
